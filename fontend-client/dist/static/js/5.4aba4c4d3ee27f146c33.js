webpackJsonp([5],{A82U:function(t,e,n){"use strict";var s=n("BO1k"),i=n.n(s),r=n("Dd8w"),a=n.n(r),c=n("msXN"),o=n("NYxO"),l=n("gyMJ"),u=n("WU9+"),m={name:"comment",mixins:[c.a],props:{playId:Number,type:Number},data:function(){return{commentList:[],userPic:[],userName:[],textarea:"",ZAN:u.a.ZAN}},computed:a()({},Object(o.b)(["id","userId","index","loginIn","avator"])),watch:{id:function(){this.getComment()}},mounted:function(){this.getComment()},methods:{getComment:function(){var t=this;l.a.getAllComment(this.type,this.playId).then(function(e){t.commentList=e;var n=!0,s=!1,r=void 0;try{for(var a,c=i()(e);!(n=(a=c.next()).done);n=!0){var o=a.value;t.getUsers(o.userId)}}catch(t){s=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(s)throw r}}}).catch(function(t){console.log(t)})},getUsers:function(t){var e=this;l.a.getUserOfId(t).then(function(t){e.userPic.push(t[0].avator),e.userName.push(t[0].username)}).catch(function(t){console.log(t)})},postComment:function(){var t=this;if(this.loginIn){var e=new URLSearchParams;1===this.type?e.append("songListId",this.playId):0===this.type&&e.append("songId",this.playId),e.append("userId",this.userId),e.append("type",this.type),e.append("content",this.textarea),l.a.setComment(e).then(function(e){1===e.code?(t.textarea="",t.getComment(),t.notify("comment successfully released","success")):t.notify("Fail to release your comment","error")}).catch(function(t){console.log(t)})}else this.notify("Please login first","warning")},postUp:function(t,e,n){var s=this;if(this.loginIn){var i=new URLSearchParams;i.append("id",t),i.append("up",e+1),l.a.setLike(i).then(function(t){1===t.code&&(s.$refs.up[n].children[0].style.color="#2796dd",s.getComment())}).catch(function(t){console.log(t)})}else this.notify("Please login first","warning")}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"comment"},[n("h2",[n("span",[t._v("Comment")]),t._v(" "),n("span",{staticClass:"part__tit_desc"},[t._v("\n        "+t._s(t.commentList.length)+" comments in total")])]),t._v(" "),n("div",{staticClass:"comment-msg"},[n("el-input",{staticClass:"comment-input",attrs:{type:"textarea",placeholder:"Looking forward to your wonderful comments...",rows:2},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),t._v(" "),n("el-button",{staticClass:"sub-btn",attrs:{type:"primary"},on:{click:function(e){return t.postComment()}}},[t._v("Comment")])],1),t._v(" "),t._l(t.commentList,function(e,s){return n("ul",{key:s,staticClass:"popular"},[n("li",[n("div",{staticClass:"popular-img"},[n("img",{attrs:{src:t.attachImageUrl(t.userPic[s]),alt:""}})]),t._v(" "),n("div",{staticClass:"popular-msg"},[n("ul",[n("li",{staticClass:"name"},[t._v(t._s(t.userName[s]))]),t._v(" "),n("li",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),n("li",{staticClass:"time"},[t._v(t._s(e.createTime))])])]),t._v(" "),n("div",{ref:"up",refInFor:!0,staticClass:"up",on:{click:function(n){return t.postUp(e.id,e.up,s)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":t.ZAN}})]),t._v("\n        "+t._s(e.up)+"\n      ")])])])})],2)},staticRenderFns:[]};var p=n("VU/8")(m,d,!1,function(t){n("UYyX")},"data-v-30cad448",null);e.a=p.exports},UYyX:function(t,e){},ZfYC:function(t,e){},cOmO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),r=n("msXN"),a=n("A82U"),c=n("NYxO"),o={name:"lyric",mixins:[r.a],components:{Comment:a.a},data:function(){return{lrcTop:"200px",showLrc:!1,lyr:[]}},computed:i()({},Object(c.b)(["curTime","id","lyric","listOfSongs","listIndex"])),watch:{id:function(){this.lyr=this.parseLyric(this.listOfSongs[this.listIndex].lyric)},curTime:function(){if(0!==this.lyr.length)for(var t=0;t<this.lyr.length;t++)if(this.curTime>=this.lyr[t][0]){for(var e=0;e<this.lyr.length;e++)document.querySelectorAll(".has-lyric li")[e].style.color="#000",document.querySelectorAll(".has-lyric li")[e].style.fontSize="15px";t>=0&&(document.querySelectorAll(".has-lyric li")[t].style.color="#95d2f6",document.querySelectorAll(".has-lyric li")[t].style.fontSize="25px")}}},created:function(){this.lyr=this.lyric?this.lyric:[]}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-lyric"},[n("h1",{staticClass:"lyric-title"},[t._v("Lyric")]),t._v(" "),n("transition-group",{attrs:{name:"lyric-fade"}},[t.lyr.length?n("ul",{key:"has-lyric",staticClass:"has-lyric",style:{top:t.lrcTop}},t._l(t.lyr,function(e,s){return n("li",{key:s},[t._v("\n        "+t._s(e[1])+"\n      ")])}),0):n("div",{key:"no-lyric",staticClass:"no-lyric"},[n("span",[t._v("No lyrics yet")])])]),t._v(" "),n("comment",{attrs:{playId:t.id,type:0}})],1)},staticRenderFns:[]};var u=n("VU/8")(o,l,!1,function(t){n("ZfYC")},"data-v-5c46adf2",null);e.default=u.exports}});
//# sourceMappingURL=5.4aba4c4d3ee27f146c33.js.map