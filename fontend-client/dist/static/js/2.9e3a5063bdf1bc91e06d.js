webpackJsonp([2],{"4ShS":function(t,e){},"7fIZ":function(t,e){},HPLc:function(t,e){},KlU8:function(t,e){},X87m:function(t,e){},buoH:function(t,e){},eYrN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"scroll-top",methods:{returnTop:function(){var t=null;cancelAnimationFrame(t);var e=new Date,s=document.body.scrollTop||document.documentElement.scrollTop,i=500;t=requestAnimationFrame(function n(){var o=new Date-e,a=i-Math.max(0,i-o);document.documentElement.scrollTop=document.body.scrollTop=s-a*s/i,t=requestAnimationFrame(n),a===i&&cancelAnimationFrame(t)})}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"scroll-top",on:{click:this.returnTop}},[e("div",{staticClass:"box-in"})])},staticRenderFns:[]};var o=s("VU/8")(i,n,!1,function(t){s("lEZE")},"data-v-88fc4374",null).exports,a=s("Dd8w"),r=s.n(a),c=s("NYxO"),l={name:"song-audio",computed:r()({},Object(c.b)(["id","url","listOfSongs","isPlay","volume","curTime","changeTime","autoNext"])),watch:{isPlay:function(){this.togglePlay()},changeTime:function(){this.$refs.player.currentTime=this.changeTime},volume:function(t){this.$refs.player.volume=t}},methods:{togglePlay:function(){var t=this.$refs.player;this.isPlay?t.play():t.pause()},startPlay:function(){var t=this.$refs.player;this.$store.commit("setDuration",t.duration),t.play(),this.$store.commit("setIsPlay",!0)},timeupdate:function(){var t=this.$refs.player;this.$store.commit("setCurTime",t.currentTime)},ended:function(){this.$store.commit("setIsPlay",!1),this.$store.commit("setCurTime",0),this.$store.commit("setAutoNext",!this.autoNext)}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"song-audio"},[e("audio",{ref:"player",attrs:{src:this.url,controls:"controls",preload:"true"},on:{canplay:this.startPlay,timeupdate:this.timeupdate,ended:this.ended}})])},staticRenderFns:[]};var h=s("VU/8")(l,u,!1,function(t){s("buoH")},"data-v-e96a17c4",null).exports,d=s("msXN"),m=[{name:"HomePage",path:"/"},{name:"SongList",path:"/song-list"},{name:"Singer",path:"/singer"},{name:"MyMusic",path:"/my-music"}],v=[{name:"Login",path:"/login-in"},{name:"Register",path:"/sign-up"}],g=[{name:"Setting",path:"/setting"},{name:"LogOut",path:0}],f=s("WU9+"),p={name:"the-header",mixins:[d.a],data:function(){return{musicName:"Jake-music",navMsg:m,loginMsg:v,menuList:g,keywords:"",ERJI:f.a.ERJI,SOUSUO:f.a.SOUSUO}},computed:r()({},Object(c.b)(["userId","activeName","avator","username","loginIn"])),mounted:function(){document.querySelector("#user").addEventListener("click",function(t){document.querySelector(".menu").classList.add("show"),t.stopPropagation()},!1),document.querySelector(".menu").addEventListener("click",function(t){t.stopPropagation()},!1),document.addEventListener("click",function(){document.querySelector(".menu").classList.remove("show")},!1)},methods:{goHome:function(){this.$router.push({path:"/"})},goPage:function(t,e){document.querySelector(".menu").classList.remove("show"),this.changeIndex(e),this.loginIn||"/my-music"!==t?this.$router.push({path:t}):this.notify("Please login first","warning")},changeIndex:function(t){this.$store.commit("setActiveName",t)},goMenuList:function(t){0===t&&this.$store.commit("setIsActive",!1),document.querySelector(".menu").classList.remove("show"),t?this.$router.push({path:t}):(this.$store.commit("setLoginIn",!1),this.$router.go(0))},goSearch:function(){this.$store.commit("setSearchword",this.keywords),this.$router.push({path:"/search",query:{keywords:this.keywords}})}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"the-header"},[s("div",{staticClass:"header-logo",on:{click:t.goHome}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.ERJI}})]),t._v(" "),s("span",[t._v(t._s(t.musicName))])]),t._v(" "),s("ul",{ref:"change",staticClass:"navbar"},[t._l(t.navMsg,function(e){return s("li",{key:e.path,class:{active:e.name===t.activeName},on:{click:function(s){return t.goPage(e.path,e.name)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])}),t._v(" "),s("li",[s("div",{staticClass:"header-search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"Search song"},domProps:{value:t.keywords},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch()},input:function(e){e.target.composing||(t.keywords=e.target.value)}}}),t._v(" "),s("div",{staticClass:"search-btn",on:{click:function(e){return t.goSearch()}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.SOUSUO}})])])])]),t._v(" "),t._l(t.loginMsg,function(e){return s("li",{directives:[{name:"show",rawName:"v-show",value:!t.loginIn,expression:"!loginIn"}],key:e.type,class:{active:e.name===t.activeName},on:{click:function(s){return t.goPage(e.path,e.name)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.loginIn,expression:"loginIn"}],staticClass:"header-right"},[s("div",{attrs:{id:"user"}},[s("img",{attrs:{src:t.attachImageUrl(t.avator),alt:""}})]),t._v(" "),s("ul",{staticClass:"menu"},t._l(t.menuList,function(e,i){return s("li",{key:i,on:{click:function(s){return t.goMenuList(e.path)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)])])},staticRenderFns:[]};var y=s("VU/8")(p,I,!1,function(t){s("7fIZ")},"data-v-4fa5827a",null).exports,_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"the-footer"},t._l(t.footerList,function(e,i){return s("p",{key:i},[t._v("\n    "+t._s(e)+"\n  ")])}),0)},staticRenderFns:[]};var S=s("VU/8")({name:"the-footer",data:function(){return{footerList:["Jake-Music "]}}},_,!1,function(t){s("KlU8")},"data-v-0e07cb04",null).exports,x=s("gyMJ"),C={name:"play-bar",mixins:[d.a],data:function(){return{tag:!1,nowTime:"00:00",songTime:"00:00",curLength:0,progressLength:0,mouseStartX:0,toggle:!0,volume:50,XIAZAI:f.a.XIAZAI,ZHEDIE:f.a.ZHEDIE,SHANGYISHOU:f.a.SHANGYISHOU,XIAYISHOU:f.a.XIAYISHOU,YINLIANG:f.a.YINLIANG1,JINGYIN:f.a.JINGYIN,LIEBIAO:f.a.LIEBIAO,XIHUAN:f.a.XIHUAN}},computed:r()({},Object(c.b)(["loginIn","userId","isPlay","playButtonUrl","id","url","title","artist","picUrl","curTime","duration","listOfSongs","listIndex","showAside","autoNext","isActive"])),watch:{isPlay:function(t){t?this.$store.commit("setPlayButtonUrl",f.a.ZANTING):this.$store.commit("setPlayButtonUrl",f.a.BOFANG)},volume:function(){this.$store.commit("setVolume",this.volume/100)},curTime:function(){this.nowTime=this.formatSeconds(this.curTime),this.songTime=this.formatSeconds(this.duration),this.curLength=this.curTime/this.duration*100},autoNext:function(){this.next()}},mounted:function(){this.progressLength=this.$refs.progress.getBoundingClientRect().width,document.querySelector(".icon-volume").addEventListener("click",function(t){document.querySelector(".volume").classList.add("show-volume"),t.stopPropagation()},!1),document.querySelector(".volume").addEventListener("click",function(t){t.stopPropagation()},!1),document.addEventListener("click",function(){document.querySelector(".volume").classList.remove("show-volume")},!1)},methods:{downloadMusic:function(){var t=this;x.a.downloadMusic(this.url).then(function(e){var s=e.data,i=document.createElement("a");i.download=t.artist+"-"+t.title+".mp3",i.style.display="none";var n=new Blob([s]);i.href=URL.createObjectURL(n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}).catch(function(t){console.log(t)})},changeAside:function(){var t=!this.showAside;this.$store.commit("setShowAside",t)},togglePlay:function(){this.isPlay?this.$store.commit("setIsPlay",!1):this.$store.commit("setIsPlay",!0)},formatSeconds:function(t){var e=parseInt(t),s=0,i=0;if(e>60&&(s=parseInt(e/60),e=parseInt(e%60),s>60&&(i=parseInt(s/60),s=60)),parseInt(e)<10)var n="0:0"+parseInt(e);else n="0:"+parseInt(e);return s>0&&(n=parseInt(e)<10?"0"+parseInt(e):parseInt(e),n=parseInt(s)+":"+n),i>0&&(n=parseInt(e)<10?"0"+parseInt(e):parseInt(e),n=parseInt(i)+":"+parseInt(s)+":"+n),n},mousedown:function(t){this.mouseStartX=t.clientX,this.tag=!0},mouseup:function(){this.tag=!1},mousemove:function(t){if(!this.duration)return!1;if(this.tag){var e=t.clientX-this.mouseStartX,s=this.$refs.curProgress.getBoundingClientRect().width;this.progressLength=this.$refs.progress.getBoundingClientRect().width;var i=(s+e)/this.progressLength*100;i>100&&(i=100),this.curLength=i,this.mouseStartX=t.clientX,this.changeTime(i)}},changeTime:function(t){var e=this.duration*(.01*t);this.$store.commit("setChangeTime",e)},updatemove:function(t){if(!this.tag){var e=this.$refs.bg.offsetLeft;this.progressLength=this.$refs.progress.getBoundingClientRect().width;var s=(t.clientX-e)/this.progressLength*100;s<0?s=0:s>100&&(s=100),this.curLength=s,this.changeTime(s)}},prev:function(){-1!==this.listIndex&&this.listOfSongs.length>1&&(this.listIndex>0?(this.$store.commit("setListIndex",this.listIndex-1),this.toPlay(this.listOfSongs[this.listIndex].url)):(this.$store.commit("setListIndex",this.listOfSongs.length-1),this.toPlay(this.listOfSongs[this.listIndex].url)))},next:function(){-1!==this.listIndex&&this.listOfSongs.length>1&&(this.listIndex<this.listOfSongs.length-1?(this.$store.commit("setListIndex",this.listIndex+1),this.toPlay(this.listOfSongs[this.listIndex].url)):(this.$store.commit("setListIndex",0),this.toPlay(this.listOfSongs[0].url)))},toPlay:function(t){t&&t!==this.url&&(this.$store.commit("setId",this.listOfSongs[this.listIndex].id),this.$store.commit("setUrl",this.$store.state.configure.HOST+t),this.$store.commit("setpicUrl",this.$store.state.configure.HOST+this.listOfSongs[this.listIndex].pic),this.$store.commit("setTitle",this.replaceFName(this.listOfSongs[this.listIndex].name)),this.$store.commit("setArtist",this.replaceLName(this.listOfSongs[this.listIndex].name)),this.$store.commit("setLyric",this.parseLyric(this.listOfSongs[this.listIndex].lyric)))},goPlayerPage:function(){this.$router.push({path:"/lyric/"+this.id})},collection:function(){var t=this;if(this.loginIn){var e=new URLSearchParams;e.append("userId",this.userId),e.append("type",0),e.append("songId",this.id),x.a.setCollection(e).then(function(e){1===e.code?(t.$store.commit("setIsActive",!0),t.notify("Successful collection","success")):2===e.code?t.notify("Already collected","warning"):t.$notify.error({title:"Fail to collect this song",showClose:!1})}).catch(function(t){console.log(t)})}else this.notify("Please login first","warning")}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-bar",class:{show:!t.toggle}},[s("div",{staticClass:"item-up",class:{turn:t.toggle},on:{click:function(e){t.toggle=!t.toggle}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.ZHEDIE}})])]),t._v(" "),s("div",{staticClass:"kongjian"},[s("div",{staticClass:"item",on:{click:t.prev}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.SHANGYISHOU}})])]),t._v(" "),s("div",{staticClass:"item",on:{click:t.togglePlay}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.playButtonUrl}})])]),t._v(" "),s("div",{staticClass:"item",on:{click:t.next}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.XIAYISHOU}})])]),t._v(" "),s("div",{staticClass:"item-img",on:{click:t.goPlayerPage}},[s("img",{attrs:{src:t.picUrl,alt:""}})]),t._v(" "),s("div",{staticClass:"playing-speed"},[s("div",{staticClass:"current-time"},[t._v(t._s(t.nowTime))]),t._v(" "),s("div",{staticClass:"progress-box"},[s("div",{staticClass:"item-song-title"},[s("div",[t._v(t._s(this.title))]),t._v(" "),s("div",[t._v(t._s(this.artist))])]),t._v(" "),s("div",{ref:"progress",staticClass:"progress",on:{mousemove:t.mousemove}},[s("div",{ref:"bg",staticClass:"bg",on:{click:t.updatemove}},[s("div",{ref:"curProgress",staticClass:"cur-progress",style:{width:t.curLength+"%"}})]),t._v(" "),s("div",{ref:"idot",staticClass:"idot",style:{left:t.curLength+"%"},on:{mousedown:t.mousedown,mouseup:t.mouseup}})])]),t._v(" "),s("div",{staticClass:"left-time"},[t._v(t._s(t.songTime))])]),t._v(" "),s("div",{staticClass:"item icon-volume"},[0!==t.volume?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.YINLIANG}})]):s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.JINGYIN}})]),t._v(" "),s("el-slider",{staticClass:"volume",attrs:{vertical:!0},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1),t._v(" "),s("div",{staticClass:"item",on:{click:t.collection}},[s("svg",{staticClass:"icon",class:{active:t.isActive},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.XIHUAN}})])]),t._v(" "),s("div",{staticClass:"item",on:{click:t.downloadMusic}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.XIAZAI}})])]),t._v(" "),s("div",{staticClass:"item",on:{click:t.changeAside}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.LIEBIAO}})])])])])},staticRenderFns:[]};var w=s("VU/8")(C,k,!1,function(t){s("HPLc")},"data-v-3394823c",null).exports,L={name:"the-aside",mixins:[d.a],computed:r()({},Object(c.b)(["id","listOfSongs","showAside"])),mounted:function(){var t=this;document.addEventListener("click",function(){t.$store.commit("setShowAside",!1)},!0)}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-fade"}},[t.showAside?s("div",{staticClass:"the-aside"},[s("h2",{staticClass:"title"},[t._v("Play List")]),t._v(" "),s("ul",{staticClass:"menus"},t._l(t.listOfSongs,function(e,i){return s("li",{key:i,class:{"is-play":t.id===e.id},on:{click:function(s){return t.toplay(e.id,e.url,e.pic,i,e.name,e.lyric)}}},[t._v("\n        "+t._s(t.replaceFName(e.name))+"\n      ")])}),0)]):t._e()])},staticRenderFns:[]};var P={components:{ScrollTop:o,SongAudio:h,TheHeader:y,TheFooter:S,TheAside:s("VU/8")(L,$,!1,function(t){s("X87m")},"data-v-3f66f32d",null).exports,PlayBar:w}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("song-audio"),this._v(" "),e("the-header"),this._v(" "),e("the-aside"),this._v(" "),e("router-view",{staticClass:"music-content"}),this._v(" "),e("play-bar"),this._v(" "),e("scroll-top"),this._v(" "),e("the-footer")],1)},staticRenderFns:[]};var O=s("VU/8")(P,A,!1,function(t){s("4ShS")},"data-v-4cdbfe8e",null);e.default=O.exports},lEZE:function(t,e){}});
//# sourceMappingURL=2.9e3a5063bdf1bc91e06d.js.map