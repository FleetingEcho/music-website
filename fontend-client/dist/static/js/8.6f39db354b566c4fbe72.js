webpackJsonp([8],{"2jQA":function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=s("msXN"),o=s("sK3K"),r=s("gyMJ"),a={name:"login-in",mixins:[t.a],components:{LoginLogo:o.a},data:function(){return{loginForm:{username:"",password:""},rules:{username:[{validator:function(e,n,s){if(!n)return s(new Error("User name cannot be empty"));s()},message:"Please enter your username",trigger:"blur"}],password:[{validator:function(e,n,s){""===n?s(new Error("Please enter your password")):s()},message:"Please enter your password",trigger:"blur"}]}}},mounted:function(){this.changeIndex("Login")},methods:{changeIndex:function(e){this.$store.commit("setActiveName",e)},handleLoginIn:function(){var e=this,n=new URLSearchParams;console.log(this.loginForm.username),n.append("username",this.loginForm.username),n.append("password",this.loginForm.password),console.log(n),r.a.loginIn({username:this.loginForm.username,password:this.loginForm.password}).then(function(n){1===n.code?(e.$message({message:"Successfully logged in",type:"success"}),e.setUserMsg(n.userMsg[0]),e.$store.commit("setLoginIn",!0),setTimeout(function(){e.changeIndex("HomePage"),e.$router.push({path:"/"}),e.$router.go(0)},2e3)):e.notify("Wrong user name or password","error")}).catch(function(e){})},setUserMsg:function(e){this.$store.commit("setUserId",e.id),this.$store.commit("setUsername",e.username),this.$store.commit("setAvator",e.avator)},goSignUp:function(){this.$router.push({path:"/sign-up"})}}},i={render:function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("div",{staticClass:"login-in"},[s("login-logo"),e._v(" "),s("div",{staticClass:"login"},[e._m(0),e._v(" "),s("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"userName"},model:{value:e.loginForm.username,callback:function(n){e.$set(e.loginForm,"username",n)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"password"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.loginIn.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(n){e.$set(e.loginForm,"password",n)},expression:"loginForm.password"}})],1),e._v(" "),s("div",{staticClass:"login-btn"},[s("el-button",{on:{click:e.goSignUp}},[e._v("Register")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handleLoginIn}},[e._v("Login")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"login-head"},[n("span",[this._v("Login")])])}]};var l=s("VU/8")(a,i,!1,function(e){s("pdSo")},"data-v-1bfed7d1",null);n.default=l.exports},"5eT4":function(e,n){},pdSo:function(e,n){},sK3K:function(e,n,s){"use strict";var t=s("WU9+"),o={name:"login-logo",data:function(){return{ERJI:t.a.ERJI}}},r={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"login-logo"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":this.ERJI}})])])},staticRenderFns:[]};var a=s("VU/8")(o,r,!1,function(e){s("5eT4")},"data-v-f6208d10",null);n.a=a.exports}});
//# sourceMappingURL=8.6f39db354b566c4fbe72.js.map