webpackJsonp([6],{D3eR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("BO1k"),i=a.n(l),r=a("msXN"),o=a("gyMJ"),s={name:"consumer-page",mixins:[r.a],data:function(){return{registerForm:{username:"",password:"",sex:"",phoneNum:"",email:"",birth:"",introduction:"",location:""},cities:[{value:"北京",label:"北京"},{value:"天津",label:"天津"},{value:"河北",label:"河北"},{value:"山西",label:"山西"},{value:"内蒙古",label:"内蒙古"},{value:"辽宁",label:"辽宁"},{value:"吉林",label:"吉林"},{value:"黑龙江",label:"黑龙江"},{value:"上海",label:"上海"},{value:"江苏",label:"江苏"},{value:"浙江",label:"浙江"},{value:"安徽",label:"安徽"},{value:"福建",label:"福建"},{value:"江西",label:"江西"},{value:"山东",label:"山东"},{value:"河南",label:"河南"},{value:"湖北",label:"湖北"},{value:"湖南",label:"湖南"},{value:"广东",label:"广东"},{value:"广西",label:"广西"},{value:"海南",label:"海南"},{value:"重庆",label:"重庆"},{value:"四川",label:"四川"},{value:"贵州",label:"贵州"},{value:"云南",label:"云南"},{value:"西藏",label:"西藏"},{value:"陕西",label:"陕西"},{value:"甘肃",label:"甘肃"},{value:"青海",label:"青海"},{value:"宁夏",label:"宁夏"},{value:"新疆",label:"新疆"},{value:"香港",label:"香港"},{value:"澳门",label:"澳门"},{value:"台湾",label:"台湾"}],rules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}],sex:[{required:!0,message:"Select gender",trigger:"change"}],phoneNum:[{essage:"请Select a date",trigger:"blur"}],email:[{message:"Please fill in email address",trigger:"blur"},{type:"email",message:"Please fill in a valid email",trigger:["blur","change"]}],birth:[{required:!0,type:"date",message:"请Select a date",trigger:"change"}],introduction:[{message:"Please fill in introduction",trigger:"blur"}],location:[{message:"Please fill in location",trigger:"change"}]},tableData:[],tempDate:[],is_search:!1,multipleSelection:[],centerDialogVisible:!1,editVisible:!1,delVisible:!1,select_word:"",form:{id:"",username:"",password:"",sex:"",phoneNum:"",email:"",birth:"",introduction:"",location:"",createTime:"",updateTime:""},pageSize:5,currentPage:1,idx:-1}},computed:{data:function(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},watch:{select_word:function(){if(""===this.select_word)this.tableData=this.tempDate;else{this.tableData=[];var e=!0,t=!1,a=void 0;try{for(var l,r=i()(this.tempDate);!(e=(l=r.next()).done);e=!0){var o=l.value;o.username.includes(this.select_word)&&this.tableData.push(o)}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}}}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.currentPage=e},uploadUrl:function(e){return this.$store.state.HOST+"/user/avatar/update?id="+e},getData:function(){var e=this;this.tableData=[],this.tempDate=[],o.a.getAllUser().then(function(t){e.tableData=t,e.tempDate=t,e.currentPage=1})},getCollect:function(e){this.$router.push({path:"/collect",query:{id:e}})},addPeople:function(){var e=this,t=this.registerForm.birth,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),l=new URLSearchParams;l.append("username",this.registerForm.username),l.append("password",this.registerForm.password),l.append("sex",this.registerForm.sex),l.append("phone_num",this.registerForm.phoneNum),l.append("email",this.registerForm.email),l.append("birth",a),l.append("introduction",this.registerForm.introduction),l.append("location",this.registerForm.location),l.append("avator","/img/user.jpg"),o.a.setUser(l).then(function(t){1===t.code?(e.getData(),e.registerForm={},e.notify("Successfully added","success")):e.notify("Failed to add ","error")}).catch(function(e){console.log(e)}),this.centerDialogVisible=!1},handleEdit:function(e){this.idx=e.id,this.form={id:e.id,username:e.username,password:e.password,sex:e.sex,phoneNum:e.phoneNum,email:e.email,birth:e.birth,introduction:e.introduction,location:e.location,avator:e.avator},this.editVisible=!0},saveEdit:function(){var e=this,t=new Date(this.form.birth),a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),l=new URLSearchParams;l.append("id",this.form.id),l.append("username",this.form.username),l.append("password",this.form.password),l.append("sex",this.form.sex),l.append("phone_num",this.form.phoneNum),l.append("email",this.form.email),l.append("birth",a),l.append("introduction",this.form.introduction),l.append("location",this.form.location),o.a.updateUserMsg(l).then(function(t){1===t.code?(e.getData(),e.notify("successfully modified","success")):e.notify("Failed to modify","error")}).catch(function(e){console.log(e)}),this.editVisible=!1},deleteRow:function(){var e=this;o.a.deleteUser(this.idx).then(function(t){t?(e.getData(),e.notify("Deleted successfully","success")):e.notify("Failed to delete","error")}).catch(function(e){}),this.delVisible=!1}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",size:"mini"},on:{click:e.delAll}},[e._v("Batch Delete")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{size:"mini",placeholder:"Select user"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("+ new user")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,border:"",size:"mini",height:"550px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Singer image",width:"102",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"80px"},attrs:{src:e.getUrl(t.row.avator),alt:""}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl(t.row.id),"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{size:"mini"}},[e._v("Update image")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"UserName",prop:"username",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Password",prop:"password",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Gender",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.changeSex(t.row.sex)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Phone",prop:"phoneNum",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Email",prop:"email",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Birthday",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.attachBirth(t.row.birth)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"introduction",label:"Signature",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"Region",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Collections",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.getCollect(e.data[t.$index].id)}}},[e._v("Collections")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Operation",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("Modify")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("Delete")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.tableData.length},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Add user",visible:e.centerDialogVisible,width:"600px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"registerForm",staticClass:"demo-ruleForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"UserName",prop:"username",size:"mini"}},[a("el-input",{attrs:{placeholder:"UserName"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password",prop:"password",size:"mini"}},[a("el-input",{attrs:{type:"password",placeholder:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Gender",size:"mini"}},[a("el-radio-group",{model:{value:e.registerForm.sex,callback:function(t){e.$set(e.registerForm,"sex",t)},expression:"registerForm.sex"}},[a("el-radio",{attrs:{label:0}},[e._v("Female")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("Male")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Phone",prop:"phoneNum",size:"mini"}},[a("el-input",{attrs:{placeholder:"Phone"},model:{value:e.registerForm.phoneNum,callback:function(t){e.$set(e.registerForm,"phoneNum",t)},expression:"registerForm.phoneNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Email",prop:"email",size:"mini"}},[a("el-input",{attrs:{placeholder:"Email"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Birthday",prop:"birth",size:"mini"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Select a date"},model:{value:e.registerForm.birth,callback:function(t){e.$set(e.registerForm,"birth",t)},expression:"registerForm.birth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Signature",prop:"introduction",size:"mini"}},[a("el-input",{attrs:{type:"textarea",placeholder:"Signature"},model:{value:e.registerForm.introduction,callback:function(t){e.$set(e.registerForm,"introduction",t)},expression:"registerForm.introduction"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Region",prop:"location",size:"mini"}},[a("el-select",{attrs:{placeholder:"Region"},model:{value:e.registerForm.location,callback:function(t){e.$set(e.registerForm,"location",t)},expression:"registerForm.location"}},e._l(e.cities,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addPeople}},[e._v("OK")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Modify",visible:e.editVisible,width:"600px"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"UserName",size:"mini"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"password",size:"mini"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Gender",size:"mini"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:0}},[e._v("Female")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("Male")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Phone",size:"mini"}},[a("el-input",{model:{value:e.form.phoneNum,callback:function(t){e.$set(e.form,"phoneNum",t)},expression:"form.phoneNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Email",size:"mini"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Birthday",prop:"birth",size:"mini"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Select a date"},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Signature",size:"mini"}},[a("el-input",{model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Region",size:"mini"}},[a("el-input",{model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveEdit}},[e._v("OK")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Hint",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt",attrs:{align:"center"}},[e._v("\n      Deletion cannot be recovered. Are you sure to delete it?\n    ")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.delVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.deleteRow}},[e._v("Delete")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(s,n,!1,function(e){a("uNwO")},"data-v-45905170",null);t.default=c.exports},uNwO:function(e,t){}});
//# sourceMappingURL=6.c866249feff647bcdd71.js.map